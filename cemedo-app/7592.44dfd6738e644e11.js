"use strict";(self.webpackChunkcemedoApp=self.webpackChunkcemedoApp||[]).push([[7592],{37592:(We,P,r)=>{r.r(P),r.d(P,{PatientModule:()=>Ge});var f=r(69808),z=r(44841),I=r(94829),G=r(20776),X=r(25245),W=r(47423),K=r(57261),tt=r(67322),et=r(53251),nt=r(42115),ot=r(86856),it=r(74107),rt=r(77446),at=r(77531),lt=r(87238),st=r(79814),pt=r(92181),ct=r(86087),ut=r(26688),dt=r(32075),mt=r(48966),s=r(93075),gt=r(64383),_t=r(9224),ft=r(30020),Z=r(91083),O=r(94327),J=r(53583);r(12983);class Zt{}var t=r(5e3),T=r(25532),ht=r(43725),d=r(59783),vt=r(13439),U=r(41299),A=r(44534),g=r(44255),C=r(19114),k=r(17773),E=r(15315),b=r(14036),x=r(40845),q=r(25787),D=r(4119),S=r(31424);const Tt=["dt"];function xt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportExcel()}),t.qZA(),t.TgZ(1,"button",36),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportPdf()}),t.qZA()}}function At(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).newPatient()}),t.qZA()}}function Ct(n,i){if(1&n&&t.YNc(0,At,1,0,"button",37),2&n){const e=t.oxw();t.Q6J("ngIf",e.urlActif())}}function bt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",39),t.TgZ(1,"h5",40),t._uU(2,"Patients"),t.qZA(),t.TgZ(3,"span",41),t._UZ(4,"i",42),t.TgZ(5,"input",43),t.NdJ("input",function(l){t.CHM(e);const a=t.oxw();return t.MAs(9).filterGlobal(a.getEventValue(l),"contains")}),t.qZA(),t.qZA(),t.qZA()}}function qt(n,i){1&n&&(t.TgZ(0,"th"),t._uU(1,"Actions"),t.qZA())}function yt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",70,71),t.NdJ("input",function(){return(0,t.CHM(e).filterCallback)(t.MAs(1).value)}),t.qZA()}2&n&&t.Q6J("value",i.$implicit)}function Nt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",70,71),t.NdJ("input",function(){return(0,t.CHM(e).filterCallback)(t.MAs(1).value)}),t.qZA()}2&n&&t.Q6J("value",i.$implicit)}function Ft(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",70,71),t.NdJ("input",function(){return(0,t.CHM(e).filterCallback)(t.MAs(1).value)}),t.qZA()}2&n&&t.Q6J("value",i.$implicit)}function Mt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",70,71),t.NdJ("input",function(){return(0,t.CHM(e).filterCallback)(t.MAs(1).value)}),t.qZA()}2&n&&t.Q6J("value",i.$implicit)}function wt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",70,71),t.NdJ("input",function(){return(0,t.CHM(e).filterCallback)(t.MAs(1).value)}),t.qZA()}2&n&&t.Q6J("value",i.$implicit)}function Pt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",70,71),t.NdJ("input",function(){return(0,t.CHM(e).filterCallback)(t.MAs(1).value)}),t.qZA()}2&n&&t.Q6J("value",i.$implicit)}function It(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",70,71),t.NdJ("input",function(){return(0,t.CHM(e).filterCallback)(t.MAs(1).value)}),t.qZA()}2&n&&t.Q6J("value",i.$implicit)}function Ot(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",70,71),t.NdJ("input",function(){return(0,t.CHM(e).filterCallback)(t.MAs(1).value)}),t.qZA()}2&n&&t.Q6J("value",i.$implicit)}function Jt(n,i){1&n&&t._UZ(0,"th")}const Y=function(){return{fontSize:"14px",color:"#2E5C2F",background:"rgb(46 92 47 / 10%)"}},Ut=function(){return{fontSize:"14px",color:"#ff0000c4",background:"rgb(239 7 67 / 10%)"}},y=function(){return{fontSize:"14px",color:"#f1749e",background:"rgb(241 116 158 / 10%)"}},Q=function(){return{fontSize:"14px",color:"#2196F3",background:"rgb(33 150 243 / 10%)"}};function kt(n,i){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th",44),t._uU(2,"Nom "),t._UZ(3,"p-sortIcon",45),t.qZA(),t.TgZ(4,"th",46),t._uU(5,"Prenom "),t._UZ(6,"p-sortIcon",47),t.qZA(),t.TgZ(7,"th",48),t._uU(8,"Genre "),t._UZ(9,"p-sortIcon",49),t.qZA(),t.TgZ(10,"th",50),t._uU(11,"Profession "),t._UZ(12,"p-sortIcon",51),t.qZA(),t.TgZ(13,"th",52),t._uU(14,"Ville "),t._UZ(15,"p-sortIcon",53),t.qZA(),t.TgZ(16,"th",54),t._uU(17,"Assurance "),t._UZ(18,"p-sortIcon",55),t.qZA(),t.TgZ(19,"th",56),t._uU(20,"T\xe9l\xe9phone 1 "),t._UZ(21,"p-sortIcon",57),t.qZA(),t.TgZ(22,"th",58),t._uU(23,"T\xe9l\xe9phone 2 "),t._UZ(24,"p-sortIcon",59),t.qZA(),t.YNc(25,qt,2,0,"th",60),t.qZA(),t.TgZ(26,"tr"),t.TgZ(27,"th"),t.TgZ(28,"p-columnFilter",61),t.YNc(29,yt,2,1,"ng-template",62),t.qZA(),t.qZA(),t.TgZ(30,"th"),t.TgZ(31,"p-columnFilter",63),t.YNc(32,Nt,2,1,"ng-template",62),t.qZA(),t.qZA(),t.TgZ(33,"th"),t.TgZ(34,"p-columnFilter",64),t.YNc(35,Ft,2,1,"ng-template",62),t.qZA(),t.qZA(),t.TgZ(36,"th"),t.TgZ(37,"p-columnFilter",65),t.YNc(38,Mt,2,1,"ng-template",62),t.qZA(),t.qZA(),t.TgZ(39,"th"),t.TgZ(40,"p-columnFilter",66),t.YNc(41,wt,2,1,"ng-template",62),t.qZA(),t.qZA(),t.TgZ(42,"th"),t.TgZ(43,"p-columnFilter",67),t.YNc(44,Pt,2,1,"ng-template",62),t.qZA(),t.qZA(),t.TgZ(45,"th"),t.TgZ(46,"p-columnFilter",68),t.YNc(47,It,2,1,"ng-template",62),t.qZA(),t.qZA(),t.TgZ(48,"th"),t.TgZ(49,"p-columnFilter",69),t.YNc(50,Ot,2,1,"ng-template",62),t.qZA(),t.qZA(),t.YNc(51,Jt,1,0,"th",60),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Akn(t.DdM(26,Y)),t.xp6(3),t.Akn(t.DdM(27,Y)),t.xp6(3),t.Akn(t.DdM(28,Ut)),t.xp6(3),t.Akn(t.DdM(29,y)),t.xp6(3),t.Akn(t.DdM(30,y)),t.xp6(3),t.Akn(t.DdM(31,y)),t.xp6(3),t.Akn(t.DdM(32,Q)),t.xp6(3),t.Akn(t.DdM(33,Q)),t.xp6(3),t.Q6J("ngIf",e.urlActifAdmin()),t.xp6(3),t.Q6J("showClearButton",!1),t.xp6(3),t.Q6J("showClearButton",!1),t.xp6(3),t.Q6J("showClearButton",!1),t.xp6(3),t.Q6J("showClearButton",!1),t.xp6(3),t.Q6J("showClearButton",!1),t.xp6(3),t.Q6J("showClearButton",!1),t.xp6(3),t.Q6J("showClearButton",!1),t.xp6(3),t.Q6J("showClearButton",!1),t.xp6(2),t.Q6J("ngIf",e.urlActifAdmin())}}function Et(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",77),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2).$implicit;return t.oxw().modifierPatient(l)}),t.qZA()}}function Dt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",78),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2).$implicit;return t.oxw().patientDetail(l.id)}),t.qZA()}}function St(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",79),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2).$implicit;return t.oxw().supprimerPatient(l)}),t.qZA()}}function Yt(n,i){if(1&n&&(t.TgZ(0,"td",72),t.YNc(1,Et,1,0,"button",74),t.YNc(2,Dt,1,0,"button",75),t.YNc(3,St,1,0,"button",76),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.urlActifAdmin()),t.xp6(1),t.Q6J("ngIf",e.urlActifAdmin()),t.xp6(1),t.Q6J("ngIf",e.urlActifAdmin())}}const L=function(){return{color:"#2E5C2F"}},Qt=function(){return{color:"red"}},N=function(){return{color:"#f1749e"}},V=function(){return{color:"#2196F3"}};function Lt(n,i){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"td",72),t._uU(2),t.qZA(),t.TgZ(3,"td",72),t._uU(4),t.qZA(),t.TgZ(5,"td",72),t._uU(6),t.qZA(),t.TgZ(7,"td",72),t._uU(8),t.qZA(),t.TgZ(9,"td",72),t._uU(10),t.qZA(),t.TgZ(11,"td",72),t._uU(12),t.qZA(),t.TgZ(13,"td",72),t._uU(14),t.qZA(),t.TgZ(15,"td",72),t._uU(16),t.qZA(),t.YNc(17,Yt,4,3,"td",73),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.Akn(t.DdM(25,L)),t.xp6(1),t.Oqu(e.user.nom),t.xp6(1),t.Akn(t.DdM(26,L)),t.xp6(1),t.Oqu(e.user.prenoms),t.xp6(1),t.Akn(t.DdM(27,Qt)),t.xp6(1),t.Oqu(e.user.genre.libelle),t.xp6(1),t.Akn(t.DdM(28,N)),t.xp6(1),t.Oqu(e.profession),t.xp6(1),t.Akn(t.DdM(29,N)),t.xp6(1),t.Oqu(e.lieuHabitation),t.xp6(1),t.Akn(t.DdM(30,N)),t.xp6(1),t.Oqu(e.assurance.libelle),t.xp6(1),t.Akn(t.DdM(31,V)),t.xp6(1),t.Oqu(e.user.tel),t.xp6(1),t.Akn(t.DdM(32,V)),t.xp6(1),t.Oqu(e.user.tel2),t.xp6(1),t.Q6J("ngIf",o.urlActifAdmin())}}function Vt(n,i){if(1&n&&(t.TgZ(0,"div",39),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" Total: ",e.patients?e.patients.length:0," patients ")}}const Bt=function(){return[]},Ht=function(){return["user.nom","user.prenoms","lieuHabitation","profession"]},jt=function(){return{width:"450px"}},Rt=function(){return{width:"650px"}};let $t=(()=>{class n{constructor(e,o,l,a,p,m,u,_){this.patientService=e,this.route=o,this.employeService=l,this.primeNgConfig=a,this.patientForm=p,this.confirmationService=m,this.messageService=u,this.assuranceService=_,this.loading=!0,this.exportColumns=[],this.doctor=[{age:25},{age:40},{age:28}],this.patientDialog=!1}ngOnInit(){this.recupererConfig(),this.recupererPatient(),this.initFormulaire()}patientDetail(e){this.route.url.includes("admin")&&this.route.navigate(["admin/patient/detail",e])}supprimerPatient(e){this.route.url.includes("admin")&&this.confirmationService.confirm({message:"Supprimer le/la patient(e) "+e.user.nom+" "+e.user.prenoms+"?",header:"Confirmer",icon:"pi pi-exclamation-triangle",accept:()=>{this.patientService.supprimerPatient(e.id).subscribe({next:()=>{this.messageService.add({severity:"info",summary:"Suppression",detail:"Le patient a \xe9t\xe9 supprim\xe9",icon:"pi-file"}),this.patients=this.patients.filter(o=>o.user.id!==e.user.id)},error:()=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Le patient ne peut pas \xeatre supprimer",icon:"pi-file"})}})}})}saveAsExcelFile(e,o){const p=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});O(p,o+"_.xlsx")}applyFilterGlobal(e,o){this.dt.filterGlobal(e.target.value,o)}getEventValue(e){return e.target.value}exportPdf(){const e=new J.jsPDF("portrait","px","a4");e.autoTable({head:this.exportColumns,body:this.patients}),e.save("rapport-patient.pdf")}exportExcel(){r.e(574).then(r.bind(r,80574)).then(e=>{const l={Sheets:{data:e.utils.json_to_sheet(this.patients)},SheetNames:["data"]},a=e.write(l,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(a,"rapport-patient")})}urlActif(){return this.route.url.includes("/reception/patient/liste")||this.route.url.includes("admin")}urlActifAdmin(){return this.route.url.includes("admin/patient/liste")}newPatient(){this.patientForms.reset(),this.patientDialog=!this.patientDialog}recupererPatient(){this.patientService.recupererPatient().subscribe({next:e=>{this.posts=e.data?e:[],this.patients=this.posts.data,this.loading=!1},error:()=>{},complete:()=>{}}),this.assuranceService.recupererAssurance().subscribe({next:e=>{this.postsAssurance=e.data?e:[],this.assurances=this.postsAssurance.data},error:()=>{},complete:()=>{}}),this.employeService.recupererGenre().subscribe({next:e=>{this.genres=e.data||[]}})}enregistrerPatient(){var e,o,l,a,p,m,u,_,F,M,w;if(this.route.url.includes("admin")){const c=new Zt;c.nom=null===(e=this.patientForms.get("nom"))||void 0===e?void 0:e.value,c.prenoms=null===(o=this.patientForms.get("prenoms"))||void 0===o?void 0:o.value,c.login=null===(l=this.patientForms.get("login"))||void 0===l?void 0:l.value,c.tel=null===(a=this.patientForms.get("tel"))||void 0===a?void 0:a.value,c.tel2=null===(p=this.patientForms.get("tel2"))||void 0===p?void 0:p.value,c.email=null===(m=this.patientForms.get("email"))||void 0===m?void 0:m.value,c.dateNaissance=null===(u=this.patientForms.get("dateNaissance"))||void 0===u?void 0:u.value,c.profession=null===(_=this.patientForms.get("profession"))||void 0===_?void 0:_.value,c.password=null===(F=this.patientForms.get("password"))||void 0===F?void 0:F.value;const Xe=null===(M=this.patientForms.get("assurance"))||void 0===M?void 0:M.value;c.assurance=Xe.id,"modification"!=this.boutonActif?(c.id=null,this.patientService.enregistrerPatient(c).subscribe({next:$=>{this.messageService.add({severity:"success",summary:"Service Message",detail:"Le patient a \xe9t\xe9 enregistr\xe9"}),this.patientForms.reset()},error:$=>{},complete:()=>{this.recupererPatient(),this.patientDialog=!1}})):(c.id=null===(w=this.patientForms.get("id"))||void 0===w?void 0:w.value,this.patientService.modifierPatient(c).subscribe({next:$=>{this.messageService.add({severity:"success",summary:"Service Message",detail:"Le patient a \xe9t\xe9 modifi\xe9"}),this.patientForms.reset()}}))}}modifierPatient(e){this.boutonActif="modification",this.patientDialog=!0,this.patientForms.patchValue({nom:e.user.nom,prenoms:e.user.prenoms,login:e.user.login,profession:e.profession,email:e.user.email,lieuHabitation:e.lieuHabitation,tel:e.user.tel,tel2:e.user.tel2,password:e.user.password})}recupererConfig(){this.primeNgConfig.setTranslation({monthNames:["Janvier","Fevrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","Decembre"],dayNamesShort:["Dim.","Lun.","Mar.","Mer.","Jeu.","Ven.","Sam."],startsWith:"Commence par",contains:"Contient",notContains:"Ne contient pas",endsWith:"Fini par",equals:"Egale \xe0",notEquals:"diff\xe9rent de",noFilter:"Pas de filtre",reject:"Non",accept:"Oui"})}initFormulaire(){this.patientForms=this.patientForm.group({active:[!0,[s.kI.required,s.kI.maxLength(10)]],assurance:["",[s.kI.required,s.kI.maxLength(10)]],createdAt:["",[s.kI.required,s.kI.maxLength(10)]],dateNaissance:["",[s.kI.required,s.kI.maxLength(10)]],email:["",[s.kI.required,s.kI.maxLength(30),s.kI.email]],genre:["",[s.kI.required,s.kI.maxLength(10)]],id:null,lieuHabitation:["",[s.kI.required,s.kI.maxLength(20)]],login:["",[s.kI.required,s.kI.maxLength(20)]],nom:["",[s.kI.required,s.kI.minLength(3)]],numeroAssure:["",[s.kI.required,s.kI.maxLength(10)]],password:["",[s.kI.required,s.kI.maxLength(8)]],prenoms:["",[s.kI.required,s.kI.maxLength(20)]],profession:["",[s.kI.required,s.kI.maxLength(20)]],role:["",[s.kI.required,s.kI.maxLength(20)]],tauxCouverture:[null,[s.kI.required,s.kI.maxLength(10)]],tel:["",[s.kI.required,s.kI.maxLength(15)]],tel2:["",[s.kI.required,s.kI.maxLength(10)]],fcmtoken:["",[s.kI.required,s.kI.maxLength(10)]],updatedAt:["",[s.kI.required,s.kI.maxLength(10)]],version:[null,[s.kI.required,s.kI.maxLength(10)]]})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.e),t.Y36(Z.F0),t.Y36(ht.m),t.Y36(d.b4),t.Y36(s.qu),t.Y36(d.YP),t.Y36(d.ez),t.Y36(vt.q))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-patient-view"]],viewQuery:function(e,o){if(1&e&&t.Gf(Tt,5),2&e){let l;t.iGM(l=t.CRH())&&(o.dt=l.first)}},decls:65,vars:26,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["scrollHeight","600px","styleClass","p-datatable-gridlines","selectionMode","multiple",3,"value","scrollable","globalFilterFields","loading","filterDelay","paginator","rows","showCurrentPageReport"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["header","Cr\xe9er ou modifier un patient","styleClass","p-fluid",3,"visible","modal","visibleChange"],[3,"formGroup","submit"],[1,"row","mt-5"],[1,"col-md-4","col-lg-4","col-sm-12"],[1,"mb-3"],["type","text","formControlName","nom","placeholder","Nom",1,"form-control"],["type","text","formControlName","prenoms","placeholder","Pr\xe9nom",1,"form-control"],[1,"row"],["optionLabel","libelle","formControlName","genre",3,"options","showClear"],["type","date","formControlName","dateNaissance","placeholder","Date de naissance",1,"form-control"],["type","text","formControlName","lieuHabitation","placeholder","Ville",1,"form-control"],["type","text","formControlName","profession","placeholder","Profession",1,"form-control"],["placeholder","assurance","optionLabel","libelle","formControlName","assurance",3,"options","showClear"],["type","number","formControlName","tauxCouverture","placeholder","Taux de couverture",1,"form-control"],[1,"col-md-12","col-lg-12","col-sm-12"],["type","text","formControlName","tel","placeholder","T\xe9l\xe9phone 1",1,"form-control"],["type","text","formControlName","tel2","placeholder","T\xe9l\xe9phone 2",1,"form-control"],["type","email","formControlName","email","placeholder","E-mail",1,"form-control"],["type","text","formControlName","numeroAssure","placeholder","Numero d'assurance",1,"form-control"],[1,"col-md-2","col-lg-2","col-sm-12"],["label","Enregistrer","icon","pi pi-check","type","submit"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","pTooltip","PDF","tooltipPosition","bottom",1,"p-button-warning","mr-2",3,"click"],["pButton","","pRipple","","label","Ajouter un patient","icon","pi pi-plus","class","p-button-help",3,"click",4,"ngIf"],["pButton","","pRipple","","label","Ajouter un patient","icon","pi pi-plus",1,"p-button-help",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Rechercher...",3,"input"],["pSortableColumn","user.nom"],["field","user.nom"],["pSortableColumn","user.prenoms"],["field","user.prenoms"],["pSortableColumn","user.genre"],["field","user.genre"],["pSortableColumn","user.profession"],["field","profession"],["pSortableColumn","user.lieuHabitation"],["field","lieuHabitation"],["pSortableColumn","user.assurance"],["field","assurance"],["pSortableColumn","user.tel"],["field","user.tel"],["pSortableColumn","user.tel2"],["field","user.tel2"],[4,"ngIf"],["type","text","field","user.nom","matchMode","contains","pTooltip","Options de filtrage",3,"showClearButton"],["pTemplate","filter"],["type","text","field","user.prenoms","matchMode","contains","pTooltip","Options de filtrage",3,"showClearButton"],["type","text","field","uer.genre","matchMode","contains","pTooltip","Options de filtrage",3,"showClearButton"],["type","text","field","profession","matchMode","contains","pTooltip","Options de filtrage",3,"showClearButton"],["type","text","field","lieuHabitation","matchMode","contains","pTooltip","Options de filtrage",3,"showClearButton"],["type","text","field","assurance","matchMode","contains","pTooltip","Options de filtrage",3,"showClearButton"],["type","text","field","user.tel","matchMode","contains","pTooltip","Options de filtrage",3,"showClearButton"],["type","text","field","tel2","matchMode","contains","pTooltip","Options de filtrage",3,"showClearButton"],["type","text","maxlength","20","pInputText","",1,"p-2","border",3,"value","input"],["valeur",""],[2,"min-width","200px"],["style","min-width:200px",4,"ngIf"],["pButton","","pRipple","","type","button","pTooltip","Modifier","icon","pi pi-pencil","class","p-button-rounded p-button-text",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pTooltip","D\xe9tail du patient","icon","pi pi-angle-right","class","p-button-rounded p-button-text",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pTooltip","Supprimer le patient","icon","pi pi-trash","class","p-button-rounded p-button-text p-button-danger",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pTooltip","Modifier","icon","pi pi-pencil",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","pRipple","","type","button","pTooltip","D\xe9tail du patient","icon","pi pi-angle-right",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","pRipple","","type","button","pTooltip","Supprimer le patient","icon","pi pi-trash",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"div",4),t.TgZ(5,"p-toolbar",5),t.YNc(6,xt,2,0,"ng-template",6),t.YNc(7,Ct,1,1,"ng-template",7),t.qZA(),t.TgZ(8,"p-table",8,9),t.YNc(10,bt,6,0,"ng-template",10),t.YNc(11,kt,52,34,"ng-template",11),t.YNc(12,Lt,18,33,"ng-template",12),t.YNc(13,Vt,2,1,"ng-template",13),t.qZA(),t.qZA(),t._UZ(14,"p-confirmDialog"),t._UZ(15,"p-toast"),t.TgZ(16,"p-dialog",14),t.NdJ("visibleChange",function(a){return o.patientDialog=a}),t.TgZ(17,"form",15),t.NdJ("submit",function(){return o.enregistrerPatient()}),t.TgZ(18,"div",16),t.TgZ(19,"div",17),t.TgZ(20,"div",18),t._UZ(21,"input",19),t.qZA(),t.qZA(),t.TgZ(22,"div",17),t.TgZ(23,"div",18),t._UZ(24,"input",20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"div",21),t.TgZ(26,"div",17),t.TgZ(27,"div",18),t._UZ(28,"p-dropdown",22),t.qZA(),t.qZA(),t.TgZ(29,"div",17),t.TgZ(30,"div",18),t._UZ(31,"input",23),t.qZA(),t.qZA(),t.TgZ(32,"div",17),t.TgZ(33,"div",18),t._UZ(34,"input",24),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",21),t.TgZ(36,"div",17),t.TgZ(37,"div",18),t._UZ(38,"input",25),t.qZA(),t.qZA(),t.TgZ(39,"div",17),t.TgZ(40,"div",18),t.TgZ(41,"span"),t._UZ(42,"p-dropdown",26),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"div",17),t.TgZ(44,"div",18),t._UZ(45,"input",27),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"div",21),t.TgZ(47,"div",28),t.TgZ(48,"div",18),t._UZ(49,"input",29),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",21),t.TgZ(51,"div",28),t.TgZ(52,"div",18),t._UZ(53,"input",30),t.qZA(),t.qZA(),t.qZA(),t.TgZ(54,"div",21),t.TgZ(55,"div",28),t.TgZ(56,"div",18),t._UZ(57,"input",31),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"div",21),t.TgZ(59,"div",17),t.TgZ(60,"div",18),t._UZ(61,"input",32),t.qZA(),t.qZA(),t.qZA(),t.TgZ(62,"div",21),t.TgZ(63,"div",33),t._UZ(64,"p-button",34),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("title","Patients")("items",t.DdM(22,Bt))("active_item","patient"),t.xp6(5),t.Q6J("value",o.patients)("scrollable",!0)("globalFilterFields",t.DdM(23,Ht))("loading",o.loading)("filterDelay",0)("paginator",!0)("rows",7)("showCurrentPageReport",!0),t.xp6(6),t.Akn(t.DdM(24,jt)),t.xp6(2),t.Akn(t.DdM(25,Rt)),t.Q6J("visible",o.patientDialog)("modal",!0),t.xp6(1),t.Q6J("formGroup",o.patientForms),t.xp6(11),t.Q6J("options",o.genres)("showClear",!0),t.xp6(14),t.Q6J("options",o.assurances)("showClear",!0))},directives:[U.L,A.o,d.jx,g.iA,C.Q,k.FN,E.V,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,b.Lt,s.wV,x.zx,x.Hq,q.H,D.u,f.O5,S.o,g.lQ,g.fz,g.xl],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),n})();class zt{}function Gt(n,i){if(1&n&&(t.TgZ(0,"div",27),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Genre :",e.users.genre.libelle," ")}}function Xt(n,i){if(1&n&&(t.TgZ(0,"div",27),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Residence :",e.md2.lieuHabitation,"")}}function Wt(n,i){if(1&n&&(t.TgZ(0,"div",27),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Assurance : ",e.md2.assurance.libelle,"")}}function Kt(n,i){if(1&n&&(t.TgZ(0,"div",27),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Taux d'assurance :",e.md2.tauxCouverture," %")}}function te(n,i){if(1&n&&(t.TgZ(0,"div",27),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Num\xe9ro d'assurance : ",e.md2.numeroAssure," ")}}function ee(n,i){if(1&n&&(t.TgZ(0,"div",27),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Profession: ",e.md2.profession,"")}}function ne(n,i){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"div",25),t.TgZ(2,"div",26),t.TgZ(3,"div",27),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"div",25),t.TgZ(6,"div",26),t.TgZ(7,"div",27),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",25),t.TgZ(10,"div",26),t.YNc(11,Gt,2,1,"div",28),t.qZA(),t.qZA(),t.TgZ(12,"div",25),t.TgZ(13,"div",26),t.TgZ(14,"div",27),t._uU(15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",25),t.TgZ(17,"div",26),t.YNc(18,Xt,2,1,"div",28),t.qZA(),t.qZA(),t.TgZ(19,"div",25),t.TgZ(20,"div",26),t.TgZ(21,"div",27),t._uU(22),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",25),t.TgZ(24,"div",26),t.TgZ(25,"div",27),t._uU(26),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",25),t.TgZ(28,"div",26),t.YNc(29,Wt,2,1,"div",28),t.qZA(),t.qZA(),t.TgZ(30,"div",25),t.TgZ(31,"div",26),t.YNc(32,Kt,2,1,"div",28),t.qZA(),t.qZA(),t.TgZ(33,"div",25),t.TgZ(34,"div",26),t.YNc(35,te,2,1,"div",28),t.qZA(),t.qZA(),t.TgZ(36,"div",25),t.TgZ(37,"div",26),t.YNc(38,ee,2,1,"div",28),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(4),t.hij("Nom : ",e.users.nom," "),t.xp6(4),t.hij("Prenom : ",e.users.prenoms,""),t.xp6(3),t.Q6J("ngIf",e.users.genre),t.xp6(4),t.hij("Date de naissance : ",e.users.dateNaissance,""),t.xp6(3),t.Q6J("ngIf",e.md2),t.xp6(4),t.hij("Num\xe9ro de T\xe9l\xe9phone: ",e.users.tel," "),t.xp6(4),t.hij("E-mail : ",e.users.email,""),t.xp6(3),t.Q6J("ngIf",e.md2),t.xp6(3),t.Q6J("ngIf",e.md2),t.xp6(3),t.Q6J("ngIf",e.md2),t.xp6(3),t.Q6J("ngIf",e.md2)}}function oe(n,i){if(1&n&&(t.TgZ(0,"ul"),t.TgZ(1,"li"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4," OUI "),t.qZA(),t.qZA()),2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.affection.libelle)}}let ie=(()=>{class n{constructor(e,o){this.patService=e,this.routeParams=o,this.users=new zt,this.doughnutChartLabels=["Chat","Appel T\xe9l\xe9phonique","Appel Vid\xe9o"],this.doughnutChartData=[45,50,5],this.doughnutChartLegend=!1,this.doughnutChartColors=[{backgroundColor:["#735A84","#E76412","#9BC311"]}],this.doughnutChartType="doughnut",this.doughnutChartOptions={animation:!1,responsive:!0}}ngOnInit(){this.chart1(),this.patService.recupererPatientById(this.routeParams.snapshot.params.id).subscribe({next:o=>{this.md1=o.data?o:{},this.md2=this.md1.data,this.users=this.md2.user,this.ant=this.md2.antecedents,this.InfoPatient="Mr."+this.users.nom+" "+this.users.prenoms},error:()=>{},complete:()=>{}})}chart1(){this.lineChartOptions={series:[{name:"Consultation \xe0 domicile",data:[70,200,80,180,170,105,210]},{name:"Appel T\xe9l\xe9phonique",data:[80,250,30,120,260,100,180,30,120,260,100,180]},{name:"Appel Vid\xe9o",data:[85,130,89,225,85,190,190,30,120,260,102,180]},{name:"Chat",data:[89,140,86,225,80,192,120,30,120,260,100,180]},{name:"Hospitalisation \xe0 domicile",data:[87,150,85,225,80,170,120,30,120,260,101,180]}],chart:{height:350,type:"line",foreColor:"#9aa0ac",dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},toolbar:{show:!1}},colors:["#A5A5A5","#875692","#4CB5AC","#6C63FF","#475C7A"],stroke:{curve:"smooth"},grid:{row:{colors:["transparent","transparent"],opacity:.5}},markers:{size:3},xaxis:{categories:["Jan","F\xe9v","Mar","Avr","Mai","Jui","Juil","Ao\xfb","Sep","Oct","Nov","D\xe9c"],title:{text:"2022"}},yaxis:{title:{text:"Patients"}},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5},tooltip:{theme:"dark",marker:{show:!0},x:{show:!0}}}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.e),t.Y36(Z.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-patient-detail"]],decls:44,vars:7,consts:[[1,"content"],[1,"content-block"],[1,"surface-ground","px-4","py-5","md:px-6","lg:px-8"],[1,"grid"],[1,"col-12","md:col-12","lg:col-12"],[1,"surface-card","shadow-2","p-3","border-round"],[1,"header"],[1,"font-weight-light","col-orange"],[1,"body"],[1,"row"],[1,"col-md-12","col-xl-12"],["class","col-md-4",4,"ngIf"],[1,"col-md-2"],[4,"ngFor","ngForOf"],[1,"col-md-6","mt-3"],[1,"recent-report__chart"],["baseChart","","chartType","doughnut",1,"chart",3,"data","labels","options","legend","colors"],[1,"country-chart"],[1,"d-flex","justify-content-between","mx-xl-5","mt-3"],[1,"chart-note"],[1,"dot","dot-product","bg-green"],[1,"mb-0"],[1,"dot","dot-product","bg-orange"],[1,"dot","dot-product","bg-purple"],[1,"col-md-4"],[1,"progress-list","m-b-10"],[1,"details"],[1,"title"],["class","title",4,"ngIf"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"h2",7),t._uU(8,"Informations"),t.qZA(),t.qZA(),t.TgZ(9,"div",8),t.TgZ(10,"div",9),t.TgZ(11,"div",10),t.TgZ(12,"div",9),t.YNc(13,ne,39,11,"div",11),t.TgZ(14,"div",12),t.TgZ(15,"div",6),t.TgZ(16,"h2",7),t._uU(17,"Ant\xe9cedents"),t.qZA(),t.qZA(),t.YNc(18,oe,5,1,"ul",13),t.qZA(),t.TgZ(19,"div",14),t.TgZ(20,"div",15),t._UZ(21,"canvas",16),t.qZA(),t.TgZ(22,"div",17),t.TgZ(23,"div",18),t.TgZ(24,"div",19),t._UZ(25,"span",20),t.TgZ(26,"span"),t._uU(27,"Chat"),t.qZA(),t.qZA(),t.TgZ(28,"p",21),t._uU(29,"30,289 FCFA"),t.qZA(),t.qZA(),t.TgZ(30,"div",18),t.TgZ(31,"div",19),t._UZ(32,"span",22),t.TgZ(33,"span"),t._uU(34,"Appel T\xe9l\xe9phonique"),t.qZA(),t.qZA(),t.TgZ(35,"p",21),t._uU(36,"525,968 FCFA"),t.qZA(),t.qZA(),t.TgZ(37,"div",18),t.TgZ(38,"div",19),t._UZ(39,"span",23),t.TgZ(40,"span"),t._uU(41,"Appel Vid\xe9o"),t.qZA(),t.qZA(),t.TgZ(42,"p",21),t._uU(43,"45,278 FCFA"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(13),t.Q6J("ngIf",o.users),t.xp6(5),t.Q6J("ngForOf",o.ant),t.xp6(3),t.Q6J("data",o.doughnutChartData)("labels",o.doughnutChartLabels)("options",o.doughnutChartOptions)("legend",o.doughnutChartLegend)("colors",o.doughnutChartColors))},directives:[f.O5,f.sg,I.jh],styles:[""]}),n})(),re=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-patient-dossier"]],decls:2,vars:0,template:function(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"patient-dossier works!"),t.qZA())},styles:[""]}),n})();var ae=r(50477);class le{}var se=r(15439),pe=r.n(se),h=r(40520);let B=(()=>{class n{constructor(e){this.http=e,this.configUrl="http://38.242.229.12/"}recupererListeOrdonnance(){return this.http.get(this.configUrl+"ordonnances/",{headers:new h.WM({"Content-Type":"application/json"})})}supprimerOrdonnance(e){return this.http.get(this.configUrl+"ordonnances/active/"+e)}modificationOrdonnance(e){return this.http.post(this.configUrl+"ordonnances/update/"+e.id,e,{headers:new h.WM({"Content-Type":"application/json"})})}enregistrerOrdonnance(e){return this.http.post(this.configUrl+"ordonnances/create",e,{headers:new h.WM({"Content-Type":"application/json"})})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(h.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var H=r(10561),j=r(12145),R=r(79142);const ce=["dt"];function ue(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportExcel()}),t.qZA(),t.TgZ(1,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportPdf()}),t.qZA()}}function de(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).newOrdonnance()}),t.qZA()}}function me(n,i){if(1&n&&t.YNc(0,de,1,0,"button",28),2&n){const e=t.oxw();t.Q6J("ngIf",e.urlActif())}}function ge(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",30),t.TgZ(1,"h5",31),t._uU(2,"Ordonnance"),t.qZA(),t.TgZ(3,"span",32),t._UZ(4,"i",33),t.TgZ(5,"input",34),t.NdJ("input",function(l){t.CHM(e);const a=t.oxw();return t.MAs(9).filterGlobal(a.getEventValue(l),"contains")}),t.qZA(),t.qZA(),t.qZA()}}function _e(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",47,48),t.NdJ("input",function(){return(0,t.CHM(e).filterCallback)(t.MAs(1).value)}),t.qZA()}2&n&&t.Q6J("value",i.$implicit)}function fe(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",47,48),t.NdJ("input",function(){return(0,t.CHM(e).filterCallback)(t.MAs(1).value)}),t.qZA()}2&n&&t.Q6J("value",i.$implicit)}function Ze(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",47,48),t.NdJ("input",function(){return(0,t.CHM(e).filterCallback)(t.MAs(1).value)}),t.qZA()}2&n&&t.Q6J("value",i.$implicit)}function he(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Tol("customer-badge status-"+e.value),t.xp6(1),t.Oqu(e.label)}}function ve(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p-dropdown",49),t.NdJ("onChange",function(l){return t.CHM(e).filterCallback(l.value)}),t.YNc(1,he,2,3,"ng-template",50),t.qZA()}if(2&n){const e=i.$implicit,o=t.oxw(2);t.Q6J("baseZIndex",3e3)("ngModel",e)("options",o.statut)("showClear",!1)}}const v=function(){return{textAlign:"center"}},Te=function(){return{width:"200px"}};function xe(n,i){1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"th",35),t._uU(2,"Patient "),t._UZ(3,"p-sortIcon",36),t.qZA(),t.TgZ(4,"th",37),t._uU(5,"M\xe9decin "),t._UZ(6,"p-sortIcon",38),t.qZA(),t.TgZ(7,"th",39),t._uU(8,"Date de c\xe9ation "),t._UZ(9,"p-sortIcon",40),t.qZA(),t.TgZ(10,"th",41),t._uU(11,"Livrer "),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Actions"),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"th"),t.TgZ(16,"p-columnFilter",42),t.YNc(17,_e,2,1,"ng-template",43),t.qZA(),t.qZA(),t.TgZ(18,"th"),t.TgZ(19,"p-columnFilter",44),t.YNc(20,fe,2,1,"ng-template",43),t.qZA(),t.qZA(),t.TgZ(21,"th"),t.TgZ(22,"p-columnFilter",45),t.YNc(23,Ze,2,1,"ng-template",43),t.qZA(),t.qZA(),t.TgZ(24,"th"),t.TgZ(25,"p-columnFilter",46),t.YNc(26,ve,2,4,"ng-template",43),t.qZA(),t.qZA(),t._UZ(27,"th"),t.qZA()),2&n&&(t.xp6(1),t.Akn(t.DdM(17,v)),t.xp6(3),t.Akn(t.DdM(18,v)),t.xp6(3),t.Akn(t.DdM(19,v)),t.xp6(3),t.Akn(t.DdM(20,v)),t.xp6(2),t.Akn(t.DdM(21,v)),t.xp6(4),t.Q6J("showClearButton",!1),t.xp6(3),t.Q6J("showClearButton",!1),t.xp6(3),t.Q6J("showClearButton",!1),t.xp6(3),t.Akn(t.DdM(22,Te)),t.Q6J("showClearButton",!1)("showMenu",!1))}function Ae(n,i){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.assure.user.nom)}}function Ce(n,i){1&n&&t._UZ(0,"td")}function be(n,i){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.medecin.user.fullName)}}function qe(n,i){1&n&&t._UZ(0,"td")}function ye(n,i){1&n&&t._UZ(0,"p-tag",58)}function Ne(n,i){1&n&&t._UZ(0,"p-tag",59)}function Fe(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",60),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit;return t.oxw().modifierOdonnance(l)}),t.qZA()}}function Me(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr"),t.YNc(1,Ae,2,1,"td",51),t.YNc(2,Ce,1,0,"td",51),t.YNc(3,be,2,1,"td",51),t.YNc(4,qe,1,0,"td",51),t.TgZ(5,"td",52),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t.YNc(9,ye,1,0,"p-tag",53),t.YNc(10,Ne,1,0,"p-tag",54),t.qZA(),t.TgZ(11,"td"),t.YNc(12,Fe,1,0,"button",55),t.TgZ(13,"button",56),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().ordonnanceDetail(a)}),t.qZA(),t.TgZ(14,"button",57),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().supprimerOrdonnance(a)}),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",e.assure),t.xp6(1),t.Q6J("ngIf",!e.assure),t.xp6(1),t.Q6J("ngIf",e.medecin),t.xp6(1),t.Q6J("ngIf",!e.medecin),t.xp6(2),t.Oqu(t.xi3(7,8,e.dateEmission,"dd-MM-yyyy")),t.xp6(3),t.Q6J("ngIf",e.livre),t.xp6(1),t.Q6J("ngIf",!e.livre),t.xp6(2),t.Q6J("ngIf",o.urlActif())}}function we(n,i){if(1&n&&(t.TgZ(0,"div",30),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" Total: ",e.ordonnances?e.ordonnances.length:0," ordonnances ")}}const Pe=function(){return[]},Ie=function(){return["libelle","email","ville"]},Oe=function(){return{width:"450px"}},Je=function(){return{width:"460px"}},ke=[{path:"dashboard",component:ae.o},{path:"liste",component:$t},{path:"detail/:id",component:ie},{path:"ordonnance",component:(()=>{class n{constructor(e,o,l,a,p,m,u,_){this.route=e,this.ordonnanceForm=o,this.confirmationService=l,this.messageService=a,this.primeNgConfig=p,this.ordonnanceService=m,this.patientService=u,this.medecinService=_,this.loading=!0,this.ordonnances=[]}ngOnInit(){this.recupererOrdonnance(),this.recupereConfig(),this.ordonnanceForms=this.ordonnanceForm.group({id:null,dateEmission:["",[s.kI.required,s.kI.maxLength(30)]],medecin:["",[s.kI.required,s.kI.maxLength(30)]],assure:["",[s.kI.required,s.kI.maxLength(30)]],livre:["",[s.kI.required,s.kI.maxLength(30)]]}),this.statut=[{label:"Pas de filtre",value:""},{label:"Livrer",value:!0},{label:"Non livrer",value:!1}]}ordonnanceDetail(e){this.route.url.includes("comptable/assurance/liste")?this.route.navigate(["comptable/assurance/detail",e.id]):this.route.url.includes("admin/assurance/liste")&&this.route.navigate(["admin/assurance/detail",e.id])}urlActif(){return this.route.url.includes("doctor/patient/ordonnance")}saveAsExcelFile(e,o){const p=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});O(p,o+"_export_"+new Date+".xlsx")}applyFilterGlobal(e,o){this.dt.filterGlobal(e.target.value,o)}getEventValue(e){return e.target.value}newOrdonnance(){this.ordonnanceForms.reset(),this.ordonnanceDialog=!this.ordonnanceDialog}exportPdf(){const e=new J.jsPDF("portrait","px","a4");e.autoTable({body:this.ordonnances}),e.save("Ordonnances-rapport.pdf")}exportExcel(){r.e(574).then(r.bind(r,80574)).then(e=>{const l={Sheets:{data:e.utils.json_to_sheet(this.ordonnances)},SheetNames:["data"]},a=e.write(l,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(a,"ordonnances")})}recupererOrdonnance(){this.ordonnanceService.recupererListeOrdonnance().subscribe({next:e=>{this.posts=e.data?e:[],this.ordonnances=this.posts.data,this.loading=!1},error:()=>{},complete:()=>{}}),this.patientService.recupererPatient().subscribe({next:e=>{this.liste_patient=e.data}}),this.medecinService.recupererMedecin().subscribe({next:e=>{this.liste_medecin=e.data}})}enregistrerOrdonnance(){var e,o,l;const a=new le;a.dateEmission=pe()().toDate();const p=null===(e=this.ordonnanceForms.get("medecin"))||void 0===e?void 0:e.value;a.medecin=p.id;const m=null===(o=this.ordonnanceForms.get("assure"))||void 0===o?void 0:o.value;a.assure=m.id,a.livre=!1,"modification"!=this.boutonActif?(a.id=null,this.ordonnanceService.enregistrerOrdonnance(a).subscribe({next:u=>{this.messageService.add({key:"myKey1",severity:"success",summary:"Service Message",detail:"L 'ordonnance a \xe9t\xe9 enregistr\xe9e"}),this.ordonnanceForms.reset()},error:u=>{},complete:()=>{this.recupererOrdonnance(),this.ordonnanceDialog=!1}})):(a.id=null===(l=this.ordonnanceForms.get("id"))||void 0===l?void 0:l.value,this.ordonnanceService.modificationOrdonnance(a).subscribe({next:u=>{this.messageService.add({key:"myKey1",severity:"success",summary:"Service Message",detail:"L 'ordonnance a \xe9t\xe9 modifi\xe9e"}),this.ordonnanceForms.reset()},error:u=>{},complete:()=>{this.recupererOrdonnance(),this.ordonnanceDialog=!1}}))}supprimerOrdonnance(e){this.confirmationService.confirm({message:"Supprimer l'ordonnance n\xb0 "+e.id+"?",header:"Confirmer",icon:"pi pi-exclamation-triangle",accept:()=>{this.ordonnanceService.supprimerOrdonnance(e.id).subscribe({next:o=>{this.messageService.add({key:"myKey2",severity:"info",summary:"Suppression",detail:"l'ordonnance a \xe9t\xe9 supprim\xe9e",icon:"pi-file"}),this.ordonnances=this.ordonnances.filter(l=>l.id!==e.id)},error:()=>{this.messageService.add({key:"myKey3",severity:"error",summary:"Erreur",detail:"l'ordonnance ne peut pas \xeatre supprimer",icon:"pi-file"})}})}})}medecinItems(e){let o=[],l=e.query;for(let a=0;a<this.liste_medecin.length;a++){let p=this.liste_medecin[a];0==p.user.nom.toLowerCase().indexOf(l.toLowerCase())&&o.push(p)}this.medecinForm=o}patientItems(e){let o=[],l=e.query;for(let a=0;a<this.liste_patient.length;a++){let p=this.liste_patient[a];0==p.user.nom.toLowerCase().indexOf(l.toLowerCase())&&o.push(p)}this.patientForm=o}recupereConfig(){this.primeNgConfig.setTranslation({startsWith:"Commence par",contains:"Contient",notContains:"Ne contient pas",endsWith:"Fini par",equals:"Egale \xe0",notEquals:"diff\xe9rent de",noFilter:"Pas de filtre",reject:"Non",accept:"Oui"})}modifierOdonnance(e){this.route.url.includes("admin")&&(this.boutonActif="modification",this.ordonnanceDialog=!0,this.ordonnanceForms.patchValue({id:e.id,medecin:e.medecin.user.nom?e.medecin:"",assure:e.assure.user.nom?e.assure:"",livre:e.livre}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.F0),t.Y36(s.qu),t.Y36(d.YP),t.Y36(d.ez),t.Y36(d.b4),t.Y36(B),t.Y36(T.e),t.Y36(H.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ordonnance"]],viewQuery:function(e,o){if(1&e&&t.Gf(ce,5),2&e){let l;t.iGM(l=t.CRH())&&(o.dt=l.first)}},decls:34,vars:35,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["scrollHeight","500px","styleClass","p-datatable-gridlines","selectionMode","multiple",3,"value","scrollable","globalFilterFields","loading","filterDelay","resizableColumns","paginator","rows","showCurrentPageReport"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["header","Cr\xe9ation d'une ordonnance","styleClass","p-fluid",3,"visible","modal","visibleChange"],[3,"formGroup","ngSubmit"],[1,"grid"],[1,"col-12"],["appendTo","body","formControlName","assure","field","user.nom",3,"readonly","baseZIndex","virtualScroll","suggestions","dropdown","completeMethod"],["appendTo","body","formControlName","medecin","field","user.nom",3,"readonly","baseZIndex","virtualScroll","suggestions","dropdown","completeMethod"],[1,"col-12","md:col-12"],[1,"flex","justify-content-end"],["label","Enregistrer","icon","pi pi-check","type","submit"],["label","Annuler","icon","pi pi-times","styleClass","p-button-sm p-button-danger ml-2",3,"click"],["key","myKey1"],["key","myKey2"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","Export XLSX","tooltipPosition","bottom",1,"p-button-success","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","pTooltip","Export PDF","tooltipPosition","bottom",1,"p-button-warning","mr-2",3,"click"],["pButton","","pRipple","","label","Ajouter une nouvelle ordonnance","icon","pi pi-plus","class","p-button-help",3,"click",4,"ngIf"],["pButton","","pRipple","","label","Ajouter une nouvelle ordonnance","icon","pi pi-plus",1,"p-button-help",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Rechercher...",3,"input"],["pSortableColumn","assure.user.nom"],["field","assure.user.nom"],["pSortableColumn","medecin.user.nom",1,"text-center"],["field","medecin.user.nom"],["pSortableColumn","dateEmission",1,"text-center"],["field","dateEmission"],[1,"text-center"],["type","text","field","assure.user.nom","matchMode","contains","pTooltip","Options de filtrage",3,"showClearButton"],["pTemplate","filter"],["type","text","field","medecin.user.nom","matchMode","contains","pTooltip","Options de filtrage",3,"showClearButton"],["type","text","field","dateEmission","matchMode","contains","pTooltip","Options de filtrage",3,"showClearButton"],["field","livre","matchMode","contains",3,"showClearButton","showMenu"],["type","text","maxlength","20","pInputText","",1,"p-2","border",3,"value","input"],["valeur",""],["appendTo","body","placeholder","Livrer",3,"baseZIndex","ngModel","options","showClear","onChange"],["pTemplate","item"],[4,"ngIf"],[1,"text-right"],["severity","success","value","Livrer",4,"ngIf"],["severity","danger","value","Non livrer",4,"ngIf"],["pButton","","pRipple","","type","button","pTooltip","Modifier","icon","pi pi-pencil","class","p-button-rounded p-button-text",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pTooltip","Detail de l'ordonnance","icon","pi pi-angle-right",1,"p-button-rounded","p-button-text","p-button-success",3,"click"],["pButton","","pRipple","","type","button","pTooltip","Supprimer l'ordonnance","icon","pi pi-trash",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"],["severity","success","value","Livrer"],["severity","danger","value","Non livrer"],["pButton","","pRipple","","type","button","pTooltip","Modifier","icon","pi pi-pencil",1,"p-button-rounded","p-button-text",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"div",4),t.TgZ(5,"p-toolbar",5),t.YNc(6,ue,2,0,"ng-template",6),t.YNc(7,me,1,1,"ng-template",7),t.qZA(),t.TgZ(8,"p-table",8,9),t.YNc(10,ge,6,0,"ng-template",10),t.YNc(11,xe,28,23,"ng-template",11),t.YNc(12,Me,15,11,"ng-template",12),t.YNc(13,we,2,1,"ng-template",13),t.qZA(),t.qZA(),t._UZ(14,"p-confirmDialog"),t.TgZ(15,"p-dialog",14),t.NdJ("visibleChange",function(a){return o.ordonnanceDialog=a}),t.TgZ(16,"form",15),t.NdJ("ngSubmit",function(){return o.enregistrerOrdonnance()}),t.TgZ(17,"div",16),t.TgZ(18,"div",17),t.TgZ(19,"span"),t.TgZ(20,"h4"),t._uU(21,"Patient"),t.qZA(),t.TgZ(22,"p-autoComplete",18),t.NdJ("completeMethod",function(a){return o.patientItems(a)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",17),t.TgZ(24,"span"),t.TgZ(25,"h4"),t._uU(26,"M\xe9decin"),t.qZA(),t.TgZ(27,"p-autoComplete",19),t.NdJ("completeMethod",function(a){return o.medecinItems(a)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",20),t.TgZ(29,"div",21),t._UZ(30,"p-button",22),t.TgZ(31,"p-button",23),t.NdJ("click",function(){return o.newOrdonnance()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(32,"p-toast",24),t._UZ(33,"p-toast",25),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("title","Ordonnances")("items",t.DdM(31,Pe))("active_item","liste des ordonnances"),t.xp6(5),t.Q6J("value",o.ordonnances)("scrollable",!0)("globalFilterFields",t.DdM(32,Ie))("loading",o.loading)("filterDelay",0)("resizableColumns",!0)("paginator",!0)("rows",7)("showCurrentPageReport",!0),t.xp6(6),t.Akn(t.DdM(33,Oe)),t.xp6(1),t.Akn(t.DdM(34,Je)),t.Q6J("visible",o.ordonnanceDialog)("modal",!0),t.xp6(1),t.Q6J("formGroup",o.ordonnanceForms),t.xp6(6),t.Q6J("readonly",!0)("baseZIndex",3e3)("virtualScroll",!0)("suggestions",o.patientForm)("virtualScroll",!0)("dropdown",!0),t.xp6(5),t.Q6J("readonly",!0)("baseZIndex",3e3)("virtualScroll",!0)("suggestions",o.medecinForm)("virtualScroll",!0)("dropdown",!0))},directives:[U.L,A.o,d.jx,g.iA,C.Q,E.V,s._Y,s.JL,s.sg,j.Qc,s.JJ,s.u,x.zx,k.FN,x.Hq,q.H,D.u,f.O5,S.o,g.lQ,g.fz,g.xl,b.Lt,s.On,R.V],pipes:[f.uU],styles:[""]}),n})()},{path:"dossier",component:re},{path:"**",component:ft.J}];let Ee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[Z.Bz.forChild(ke)],Z.Bz]}),n})();var De=r(15626),Se=r(74297),Ye=r(86526),Qe=r(42939),Le=r(50330),Ve=r(48185),Be=r(14776),He=r(90512),je=r(7376),Re=r(67172),$e=r(85708),ze=r(50315);let Ge=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[T.e,H.i,d.ez,d.YP,B],imports:[[f.ez,I.m9,G.Ns.forRoot({echarts:()=>r.e(3347).then(r.t.bind(r,13347,23))}),$e.m,z.Xd,X.Ps,dt.p0,pt.Tx,ct.TU,W.ot,ut.Hi,Ee,nt.X,K.ZX,tt.lN,et.Nh,ot.FA,it.LD,rt.p9,at.c,lt.AV,st.Fk,De.K,mt.Is,h.JF,gt.Rh.forRoot({}),_t.QW,s.UX,s.u5,Se.d,C.D,Ye.q4,b.kW,j.WN,Qe.Gg,Le.vI,Ve.q,Be.JH,q.T,He.C,je.x,Re.W6,A.V,R.W,ze.g]]}),n})()}}]);