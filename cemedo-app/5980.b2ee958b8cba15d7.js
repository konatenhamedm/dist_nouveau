"use strict";(self.webpackChunkcemedoApp=self.webpackChunkcemedoApp||[]).push([[5980],{75980:(T,_,r)=>{r.d(_,{U:()=>H});var s=r(94327),c=r(53583),p=(r(12983),r(93075));class d{}var e=r(5e3),v=r(71215),C=r(91083),u=r(59783),b=r(41299),M=r(44534),g=r(44255),x=r(19114),A=r(15315),q=r(31424),f=r(40845),U=r(17773),w=r(25787),y=r(4119),F=r(69808);const N=["dt"];function k(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw().exportExcel()}),e.qZA(),e.TgZ(1,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().exportPdf()}),e.qZA()}}function E(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).newMedicament()}),e.qZA()}}function V(n,m){if(1&n&&e.YNc(0,E,1,0,"button",32),2&n){const t=e.oxw();e.Q6J("ngIf",t.urlActif())}}function J(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"div",34),e.TgZ(1,"h5",35),e._uU(2,"Medicaments"),e.qZA(),e.TgZ(3,"span",36),e._UZ(4,"i",37),e.TgZ(5,"input",38),e.NdJ("input",function(o){e.CHM(t);const a=e.oxw();return e.MAs(9).filterGlobal(a.getEventValue(o),"contains")}),e.qZA(),e.qZA(),e.qZA()}}function D(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"input",52,53),e.NdJ("input",function(){return(0,e.CHM(t).filterCallback)(e.MAs(1).value)}),e.qZA()}2&n&&e.Q6J("value",m.$implicit)}function S(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"input",52,53),e.NdJ("input",function(){return(0,e.CHM(t).filterCallback)(e.MAs(1).value)}),e.qZA()}2&n&&e.Q6J("value",m.$implicit)}function I(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"input",52,53),e.NdJ("input",function(){return(0,e.CHM(t).filterCallback)(e.MAs(1).value)}),e.qZA()}2&n&&e.Q6J("value",m.$implicit)}function Q(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"input",52,53),e.NdJ("input",function(){return(0,e.CHM(t).filterCallback)(e.MAs(1).value)}),e.qZA()}2&n&&e.Q6J("value",m.$implicit)}function P(n,m){1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"th",39),e._uU(2,"Identifiant "),e._UZ(3,"p-sortIcon",40),e.qZA(),e.TgZ(4,"th",41),e._uU(5,"Designation "),e._UZ(6,"p-sortIcon",42),e.qZA(),e.TgZ(7,"th",43),e._uU(8,"Posologie "),e._UZ(9,"p-sortIcon",44),e.qZA(),e.TgZ(10,"th",45),e._uU(11,"Quantite "),e._UZ(12,"p-sortIcon",46),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Actions"),e.qZA(),e.qZA(),e.TgZ(15,"tr"),e.TgZ(16,"th"),e.TgZ(17,"p-columnFilter",47),e.YNc(18,D,2,1,"ng-template",48),e.qZA(),e.qZA(),e.TgZ(19,"th"),e.TgZ(20,"p-columnFilter",49),e.YNc(21,S,2,1,"ng-template",48),e.qZA(),e.qZA(),e.TgZ(22,"th"),e.TgZ(23,"p-columnFilter",50),e.YNc(24,I,2,1,"ng-template",48),e.qZA(),e.qZA(),e.TgZ(25,"th"),e.TgZ(26,"p-columnFilter",51),e.YNc(27,Q,2,1,"ng-template",48),e.qZA(),e.qZA(),e._UZ(28,"th"),e.qZA()),2&n&&(e.xp6(17),e.Q6J("showClearButton",!1),e.xp6(3),e.Q6J("showClearButton",!1),e.xp6(3),e.Q6J("showClearButton",!1),e.xp6(3),e.Q6J("showClearButton",!1))}function Y(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",54),e._uU(2),e.qZA(),e.TgZ(3,"td",54),e._uU(4),e.qZA(),e.TgZ(5,"td",54),e._uU(6),e.qZA(),e.TgZ(7,"td",54),e._uU(8),e.qZA(),e.TgZ(9,"td"),e.TgZ(10,"button",55),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().updateMedicament(a)}),e.qZA(),e._UZ(11,"button",56),e.TgZ(12,"button",57),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().supprimerMedicament(a)}),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=m.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.libelle),e.xp6(2),e.Oqu(t.posologie),e.xp6(2),e.Oqu(t.quantite)}}function L(n,m){if(1&n&&(e.TgZ(0,"div",34),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" Total: ",t.medicaments?t.medicaments.length:0," medicaments ")}}const O=function(){return[]},B=function(){return["id","libelle","quantite"]},j=function(){return{width:"450px"}},Z=function(){return{width:"560px"}};let H=(()=>{class n{constructor(t,i,o,a,l,R){this.medicamentService=t,this.route=i,this.primeNgConfig=o,this.confirmationService=a,this.messageService=l,this.medicamentForm=R,this.medicaments=[],this.dragdrop=!0,this.unlockedCustomers=[],this.lockedCustomers=[],this.loading=!0,this.exportColumns=[],this.medicamentDialog=!1,this.medicamentDialogUpdate=!1}ngOnInit(){this.recupererMedicament(),this.recupererConfig(),this.medicamentForms=this.medicamentForm.group({designation:[" ",[p.kI.required,p.kI.maxLength(30)]],posologie:["",[p.kI.required,p.kI.maxLength(50)]],quantite:["",[p.kI.required]]}),this.medicamentFormsUpdate=this.medicamentForm.group({id:null,designationUpdate:[" ",[p.kI.required,p.kI.maxLength(30)]],posologieUpdate:["",[p.kI.required,p.kI.maxLength(50)]],quantiteUpdate:["",[p.kI.required]]})}saveAsExcelFile(t,i){const l=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});s(l,i+"_export_"+new Date+".xlsx")}applyFilterGlobal(t,i){this.dt.filterGlobal(t.target.value,i)}getEventValue(t){return t.target.value}toggleLock(t,i,o){i?(this.lockedCustomers=this.lockedCustomers.filter((a,l)=>l!==o),this.unlockedCustomers.push(t)):(this.unlockedCustomers=this.unlockedCustomers.filter((a,l)=>l!==o),this.lockedCustomers.push(t)),this.unlockedCustomers.sort((a,l)=>a.id<l.id?-1:1)}newMedicament(){this.medicamentDialog=!this.medicamentDialog,this.medicamentForms.reset()}updateMedicament(t){this.medicamentDialogUpdate=!this.medicamentDialogUpdate,this.medicamentFormsUpdate.patchValue({id:t.id,designationUpdate:t.libelle,posologieUpdate:t.posologie,quantiteUpdate:t.quantite})}urlActif(){return!this.route.url.includes("/comptable/pharmacie/listeMed")||!this.route.url.includes("/admin/listeMed")}exportPdf(){const t=new c.jsPDF("portrait","px","a4");t.autoTable({head:this.exportColumns,body:this.medicaments}),t.save("Pomptables.pdf")}exportExcel(){}enregistrerMedicament(){var t,i,o;const a=new d;a.libelle=null===(t=this.medicamentForms.get("designation"))||void 0===t?void 0:t.value,a.posologie=null===(i=this.medicamentForms.get("posologie"))||void 0===i?void 0:i.value,a.quantite=null===(o=this.medicamentForms.get("quantite"))||void 0===o?void 0:o.value,this.medicamentService.enregistrerMedicament(a).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Service Message",detail:"Le medicament a \xe9t\xe9 enregistr\xe9"}),this.medicamentForms.reset()},complete:()=>{this.recupererMedicament(),this.medicamentDialog=!1}})}supprimerMedicament(t){this.confirmationService.confirm({message:"Supprimer le medicament ?",header:"Confirmer",icon:"pi pi-exclamation-triangle",accept:()=>{this.medicamentService.supprimerMedicament(t.id).subscribe({next:()=>{this.messageService.add({severity:"info",summary:"Suppression",detail:"Le medicamanet a \xe9t\xe9 supprim\xe9",icon:"pi-file"}),this.medicaments=this.medicaments.filter(i=>i.id!==t.id)},error:()=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Le medicament ne peut pas \xeatre supprim\xe9",icon:"pi-file"})}})}})}recupererMedicament(){this.medicamentService.recupererListeMedicament().subscribe({next:t=>{this.posts=t.data?t:[],this.medicaments=this.posts.data,this.loading=!1},error:()=>{},complete:()=>{}})}modifierMedicament(){var t,i,o,a;const l=new d;l.id=null===(t=this.medicamentFormsUpdate.get("id"))||void 0===t?void 0:t.value,l.libelle=null===(i=this.medicamentFormsUpdate.get("designationUpdate"))||void 0===i?void 0:i.value,l.posologie=null===(o=this.medicamentFormsUpdate.get("posologieUpdate"))||void 0===o?void 0:o.value,l.quantite=null===(a=this.medicamentFormsUpdate.get("quantiteUpdate"))||void 0===a?void 0:a.value,this.medicamentService.modificationMedicament(l).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Service Message",detail:"La mise \xe0 jour a \xe9t\xe9 enregistr\xe9"}),this.medicamentFormsUpdate.reset()},complete:()=>{this.recupererMedicament(),this.medicamentDialogUpdate=!1}})}recupererConfig(){this.primeNgConfig.setTranslation({startsWith:"Commence par",contains:"Contient",notContains:"Ne contient pas",endsWith:"Fini par",equals:"Egale \xe0",notEquals:"diff\xe9rent de",noFilter:"Pas de filtre",reject:"Non",accept:"Oui"})}fermerMedicament(){this.medicamentDialogUpdate=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.O),e.Y36(C.F0),e.Y36(u.b4),e.Y36(u.YP),e.Y36(u.ez),e.Y36(p.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-medicament-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N,5),2&t){let o;e.iGM(o=e.CRH())&&(i.dt=o.first)}},decls:60,vars:28,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["scrollHeight","600px","styleClass","p-datatable-gridlines","selectionMode","multiple",3,"value","scrollable","globalFilterFields","loading","filterDelay","paginator","rows","showCurrentPageReport"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["header","Nouveau medicament","styleClass","p-fluid",3,"visible","modal","visibleChange"],[3,"formGroup","ngSubmit"],[1,"grid"],[1,"col-12","md:col-6","lg:col-6"],["type","text","pInputText","","formControlName","designation"],["type","email","pInputText","","formControlName","posologie"],[1,"col-12"],["type","number","pInputText","","formControlName","quantite"],[1,"col-12","md:col-12"],[1,"flex","justify-content-end"],["label","Enregistrer","icon","pi pi-check","type","submit"],["label","Annuler","icon","pi pi-times","styleClass","p-button-sm p-button-danger ml-2",3,"click"],["header","Mise \xe0 jour du medicament","styleClass","p-fluid",3,"visible","modal","visibleChange"],["type","text","pInputText","","formControlName","designationUpdate"],["type","text","pInputText","","formControlName","posologieUpdate"],["type","number","pInputText","","formControlName","quantiteUpdate"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","pTooltip","PDF","tooltipPosition","bottom",1,"p-button-warning","mr-2",3,"click"],["pButton","","pRipple","","label","Ajouer un nouveau medicament","icon","pi pi-plus","class","p-button-help",3,"click",4,"ngIf"],["pButton","","pRipple","","label","Ajouer un nouveau medicament","icon","pi pi-plus",1,"p-button-help",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Rechercher...",3,"input"],["pSortableColumn","id"],["field","id"],["pSortableColumn","libelle"],["field","libelle"],["pSortableColumn","posologie"],["field","posologie"],["pSortableColumn","quantite"],["field","quantite"],["type","text","field","id","matchMode","contains","pTooltip","Options de filtrage",3,"showClearButton"],["pTemplate","filter"],["type","text","field","libelle","matchMode","contains","pTooltip","Options de filtrage",3,"showClearButton"],["type","text","field","posologie","matchMode","contains","pTooltip","Options de filtrage",3,"showClearButton"],["type","text","field","quantite","matchMode","contains","pTooltip","Options de filtrage",3,"showClearButton"],["type","text","maxlength","20","pInputText","",1,"p-2","border",3,"value","input"],["valeur",""],[2,"min-width","200px"],["pButton","","pRipple","","type","button","pTooltip","Modifier le medicament","icon","pi pi-pencil",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","pRipple","","type","button","pTooltip","D\xe9tail du medicament","icon","pi pi-angle-right",1,"p-button-rounded","p-button-text","p-button-success"],["pButton","","pRipple","","type","button","pTooltip","Supprimer le medicament","icon","pi pi-trash",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"section",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"p-toolbar",5),e.YNc(6,k,2,0,"ng-template",6),e.YNc(7,V,1,1,"ng-template",7),e.qZA(),e.TgZ(8,"p-table",8,9),e.YNc(10,J,6,0,"ng-template",10),e.YNc(11,P,29,4,"ng-template",11),e.YNc(12,Y,13,4,"ng-template",12),e.YNc(13,L,2,1,"ng-template",13),e.qZA(),e.qZA(),e._UZ(14,"p-confirmDialog"),e.TgZ(15,"p-dialog",14),e.NdJ("visibleChange",function(a){return i.medicamentDialog=a}),e.TgZ(16,"form",15),e.NdJ("ngSubmit",function(){return i.enregistrerMedicament()}),e.TgZ(17,"div",16),e.TgZ(18,"div",17),e.TgZ(19,"span"),e.TgZ(20,"h4"),e._uU(21,"D\xe9signation"),e.qZA(),e._UZ(22,"input",18),e.qZA(),e.qZA(),e.TgZ(23,"div",17),e.TgZ(24,"span"),e.TgZ(25,"h4"),e._uU(26,"Posologie"),e.qZA(),e._UZ(27,"input",19),e.qZA(),e.qZA(),e.TgZ(28,"div",20),e.TgZ(29,"span"),e.TgZ(30,"h4"),e._uU(31,"Quantit\xe9"),e.qZA(),e._UZ(32,"input",21),e.qZA(),e.qZA(),e.TgZ(33,"div",22),e.TgZ(34,"div",23),e._UZ(35,"p-button",24),e.TgZ(36,"p-button",25),e.NdJ("click",function(){return i.newMedicament()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"p-dialog",26),e.NdJ("visibleChange",function(a){return i.medicamentDialogUpdate=a}),e.TgZ(38,"form",15),e.NdJ("ngSubmit",function(){return i.modifierMedicament()}),e.TgZ(39,"div",16),e.TgZ(40,"div",17),e.TgZ(41,"span"),e.TgZ(42,"h4"),e._uU(43,"D\xe9signation"),e.qZA(),e._UZ(44,"input",27),e.qZA(),e.qZA(),e.TgZ(45,"div",17),e.TgZ(46,"span"),e.TgZ(47,"h4"),e._uU(48,"Posologie"),e.qZA(),e._UZ(49,"input",28),e.qZA(),e.qZA(),e.TgZ(50,"div",20),e.TgZ(51,"span"),e.TgZ(52,"h4"),e._uU(53,"Quantit\xe9"),e.qZA(),e._UZ(54,"input",29),e.qZA(),e.qZA(),e.TgZ(55,"div",22),e.TgZ(56,"div",23),e._UZ(57,"p-button",24),e.TgZ(58,"p-button",25),e.NdJ("click",function(){return i.fermerMedicament()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(59,"p-toast"),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("title","Pharmacie")("items",e.DdM(23,O))("active_item","m\xe9dicament"),e.xp6(5),e.Q6J("value",i.medicaments)("scrollable",!0)("globalFilterFields",e.DdM(24,B))("loading",i.loading)("filterDelay",0)("paginator",!0)("rows",7)("showCurrentPageReport",!0),e.xp6(6),e.Akn(e.DdM(25,j)),e.xp6(1),e.Akn(e.DdM(26,Z)),e.Q6J("visible",i.medicamentDialog)("modal",!0),e.xp6(1),e.Q6J("formGroup",i.medicamentForms),e.xp6(21),e.Akn(e.DdM(27,Z)),e.Q6J("visible",i.medicamentDialogUpdate)("modal",!0),e.xp6(1),e.Q6J("formGroup",i.medicamentFormsUpdate))},directives:[b.L,M.o,u.jx,g.iA,x.Q,A.V,p._Y,p.JL,p.sg,p.Fj,q.o,p.JJ,p.u,p.wV,f.zx,U.FN,f.Hq,w.H,y.u,F.O5,g.lQ,g.fz,g.xl],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),n})()},71215:(T,_,r)=>{r.d(_,{O:()=>h});var s=r(40520),c=r(5e3);let h=(()=>{class p{constructor(e){this.http=e,this.configUrl="http://38.242.229.12/"}recupererListeMedicament(){return this.http.get(this.configUrl+"medicaments/",{headers:new s.WM({"Content-Type":"application/json"})})}supprimerMedicament(e){return this.http.get(this.configUrl+"medicaments/active/"+e)}modificationMedicament(e){return this.http.post(this.configUrl+"medicaments/update/"+e.id,e,{headers:new s.WM({"Content-Type":"application/json"})})}enregistrerMedicament(e){return this.http.post(this.configUrl+"medicaments/create",e,{headers:new s.WM({"Content-Type":"application/json"})})}}return p.\u0275fac=function(e){return new(e||p)(c.LFG(s.eN))},p.\u0275prov=c.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);